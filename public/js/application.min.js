$.extend($.fn,{quickClick:function(a){this.live("touchstart",function(b){moved=false;$(this).addClass("pressed");$(this).bind("touchmove",function(){moved=true;$(this).removeClass("pressed")});$(this).bind("touchend",function(c){c.preventDefault();$(this).unbind("touchend");$(this).unbind("touchmove");$(this).removeClass("pressed");if(!moved){a($(this))}})})},slideDown:function(c,e,d){c=c||400;e=e||"ease";this.css("visibility","hidden");this.show();var b=this.height()+"px";var a=this;this.css("height","0px");this.css("visibility","visible");this.animate({height:b},c,e,function(){a.css("height","auto");if(d){d($(this))}})},slideUp:function(b,e,d){b=b||400;e=e||"ease";var c=this.height()+"px";var a=this;this.css("height",c);this.animate({height:"0"},b,e,function(){a.hide();a.css("visibility","hidden");a.css("height","auto");a.show();var f=a.height()+"px";a.css("height",f);a.css("visibility","visible");a.hide();if(d){d($(this))}})},slideToggle:function(a,c,b){if(this.css("display")=="none"){this.slideDown(a,c,b)}else{this.slideUp(a,c,b)}},loadingScreen:function(){this.html('<div class="loading"><div class="spinner"><div class="bar1"></div><div class="bar2"></div><div class="bar3"></div><div class="bar4"></div><div class="bar5"></div><div class="bar6"></div><div class="bar7"></div><div class="bar8"></div><div class="bar9"></div><div class="bar10"></div><div class="bar11"></div><div class="bar12"></div></div>Loading...</div>')}});function delayedLoadingScreen(a){a=a||"#main";return setTimeout("$('"+a+"').loadingScreen()",200)}$(document).ready(function(){$("nav ul li").quickClick(function(a){loading=delayedLoadingScreen();tab=a.attr("id");$("nav ul li").removeClass("active");$("nav ul li#"+tab).addClass("active");$.get("/"+tab,function(b){clearTimeout(loading);$("#main").html(b)})});$("ul#guests li .content").quickClick(function(b){var a=b.siblings(".drawer").children(".details_box");if(a.css("display")!="none"){a.slideUp(100)}b.siblings(".drawer").slideToggle(200)});$("ul#guests li .drawer .button.details").quickClick(function(a){a.siblings(".details_box").slideToggle(100)});$("ul#guests li .drawer .button.checkin").quickClick(function(a){if(a.hasClass("checked_in")){a.html("Processing");a.addClass("disabled");$.post("/checkout",{id:a.parents("li").attr("id")},function(){a.removeClass("checked_in");a.html("Check In");a.parents("li").removeClass("checked_in");a.removeClass("disabled")})}else{a.html("Processing");a.addClass("disabled");$.post("/checkin",{id:a.parents("li").attr("id")},function(){a.addClass("checked_in");a.html("Checked In");a.parents("li").addClass("checked_in");a.removeClass("disabled")})}});$("ul#guests li .drawer .details_box .guest_group").quickClick(function(a){loading=delayedLoadingScreen();$.get("/groups/"+a.attr("id"),function(b){clearTimeout(loading);$("nav ul li").removeClass("active");$("nav ul li#groups").addClass("active");$("#main").html(b)})});$("ul#groups li .content").quickClick(function(a){loading=delayedLoadingScreen();$.get("/groups/"+a.parent("li").attr("id"),function(b){clearTimeout(loading);$("#main").html(b)})});$("table#stats tr td.guest_type").quickClick(function(a){loading=delayedLoadingScreen();$.get("/individuals/type/"+a.parent("tr").attr("id"),function(b){clearTimeout(loading);$("#main").html(b)})});$("table.alpha td").quickClick(function(a){loading=delayedLoadingScreen();active=$("nav ul li.active").attr("id");$.get("/"+active+"/alpha/"+a.html(),function(b){clearTimeout(loading);$("#main").html(b)})});$("#search .reset").quickClick(function(a){a.siblings("input").val("");a.hide();$("#search_results").empty()});$("ul.scope li .reset").quickClick(function(){loading=delayedLoadingScreen();active=$("nav ul li.active").attr("id");$.get("/"+active,function(a){clearTimeout(loading);$("#main").html(a)})});$("#search input#search_field").live("focus",function(){if(!$("#search_results").length){$("table.alpha").after('<div id="search_results"></div>')}$("table.alpha").hide()});$("#search input").live("blur",function(){if($(this).val()===""){$("#search_results").remove();$("table.alpha").show()}});$("#search input#search_field").live("keyup",function(){loading=delayedLoadingScreen("#search_results");query=$(this).val();active=$("nav ul li.active").attr("id");if(query!=""){$(this).siblings(".reset").show()}else{$(this).siblings(".reset").hide()}$.get("/"+active+"/search?query="+query,function(a){clearTimeout(loading);$("#search_results").html(a)})})});